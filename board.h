//
// Created by rufus on 25.01.18.
//

#ifndef MILL_BOARD_H
#define MILL_BOARD_H

#include <stdlib.h>
#include "player.h"
#include "fifo.h"

#define PLACE 0
#define CHOSE 1
#define DESTROY 2
#define MOVE 4
#define END 5
#define FIRST 0
#define SECOND 1

static int graph[67][4];

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @fn void init_graph();
///
/// @brief	     Inicjalizuje graf sąsiedztwa
////////////////////////////////////////////////////////////////////////////////////////////////////
void init_graph();

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @fn int move_check(int x,int y,int last_x,int last_y);
///
/// @brief	     Sprawdza możliwość poruszenia pionem
/// @return      1 jeśli można poruszyć pionem
////////////////////////////////////////////////////////////////////////////////////////////////////
int move_check(int x,int y,int last_x,int last_y);

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @class		board
///
/// @brief		Struktura planszy w grze
////////////////////////////////////////////////////////////////////////////////////////////////////
typedef struct board{
    int tab[7][7];
    unsigned int state,turn;
    int update;
    Player player[2];
    char *error;
    int last_x,last_y;
    GtkWidget *info;
    GtkWidget *score;
    PipesPtr pipes;
    int color;
} *Board;

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @fn Board init_board(GtkWidget* info,GtkWidget* score,PipesPtr pipes,char *name);
///
/// @brief	     Inicjalizuje planszę
/// @return      Zainicjalizowana plansza
////////////////////////////////////////////////////////////////////////////////////////////////////
Board init_board(GtkWidget* info,GtkWidget* score,PipesPtr pipes,char *name);

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @fn void clicked(Board board,int x,int y);
///
/// @brief	    Realizuje kliknięcie przycisku
////////////////////////////////////////////////////////////////////////////////////////////////////
void clicked(Board board,int x,int y);

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @fn int update(Board board);
///
/// @brief	    Aktualizuje labele i przycisk
/// @return     Nr tekstury do ustawienia
////////////////////////////////////////////////////////////////////////////////////////////////////
int update(Board board);

////////////////////////////////////////////////////////////////////////////////////////////////////
/// @fn void reset(Board board);
///
/// @brief	    Restartuje planszę
////////////////////////////////////////////////////////////////////////////////////////////////////
void reset(Board board);
#endif //MILL_BOARD_H
